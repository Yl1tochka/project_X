{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto px-4 py-12 max-w-2xl">
  <h1 class="text-3xl font-bold mb-8">Корзина</h1>

  {% if cart_items %}
    <div class="space-y-4">
      {% for item in cart_items %}
        <div class="flex justify-between items-center border-b pb-4">
          <div>
            <h3 class="font-bold">{{ item.product.name }}</h3>
            {% if product.image %}
              <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-48 object-cover">
            {% elif product.video %}
              <video controls class="w-full h-48 object-cover bg-black">
                <source src="{{ product.video.url }}" type="video/mp4">
              </video>
            {% else %}
              <div class="w-full h-48 bg-gray-100 flex items-center justify-center text-gray-400">Нет фото</div>
            {% endif %}
            <p>{{ item.quantity }} × {{ item.product.price }} ₽ = {{ item.subtotal }} ₽</p>
          </div>
          <a href="{% url 'cart_remove' item.product.id %}" class="text-red-500 hover:underline">Удалить</a>
        </div>
      {% endfor %}
    </div>
    <div class="mt-8 text-xl font-bold">Итого: {{ total }} ₽</div>
    <a href="{% url 'order_create' %}" class="mt-4 inline-block bg-emerald-600 text-white px-6 py-2 rounded hover:bg-emerald-700">Оформить заказ</a>
  {% else %}
    <p>Корзина пуста.</p>
    <a href="/menu/" class="text-emerald-600 hover:underline">Выбрать блюда</a>
  {% endif %}
</div>
{% endblock %}